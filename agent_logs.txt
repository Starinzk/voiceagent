--- DATABASE: Initializing DesignDatabase at module level ---
--- DATABASE: DesignDatabase initialized ---

=== STARTING AGENT WORKER ===
{"message": "starting worker", "level": "INFO", "name": "livekit.agents", "version": "1.1.1", "rtc-version": "1.0.9", "timestamp": "2025-06-16T18:53:40.121218+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39105, "timestamp": "2025-06-16T18:53:40.155353+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39107, "timestamp": "2025-06-16T18:53:40.159826+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39106, "timestamp": "2025-06-16T18:53:40.160218+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39108, "timestamp": "2025-06-16T18:53:40.160787+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39109, "timestamp": "2025-06-16T18:53:40.161213+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39110, "timestamp": "2025-06-16T18:53:40.161280+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39111, "timestamp": "2025-06-16T18:53:40.161332+00:00"}
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39112, "timestamp": "2025-06-16T18:53:40.161374+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39106, "elapsed_time": 1.33, "timestamp": "2025-06-16T18:53:41.493191+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39105, "elapsed_time": 1.39, "timestamp": "2025-06-16T18:53:41.548127+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39110, "elapsed_time": 1.39, "timestamp": "2025-06-16T18:53:41.550926+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39107, "elapsed_time": 1.42, "timestamp": "2025-06-16T18:53:41.580601+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39108, "elapsed_time": 1.43, "timestamp": "2025-06-16T18:53:41.592352+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39112, "elapsed_time": 1.43, "timestamp": "2025-06-16T18:53:41.594684+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39111, "elapsed_time": 1.44, "timestamp": "2025-06-16T18:53:41.600386+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39109, "elapsed_time": 1.46, "timestamp": "2025-06-16T18:53:41.626264+00:00"}
{"message": "see tracing information at http://localhost:8081/debug", "level": "INFO", "name": "livekit.agents", "timestamp": "2025-06-16T18:53:41.627899+00:00"}
{"message": "registered worker", "level": "INFO", "name": "livekit.agents", "id": "AW_gMwcwo8v46Q7", "url": "wss://ai-voice-app-76877ljj.livekit.cloud", "region": "US West", "protocol": 16, "timestamp": "2025-06-16T18:53:42.079348+00:00"}
{"message": "received job request", "level": "INFO", "name": "livekit.agents", "job_id": "AJ_XDaHCcgHatCq", "dispatch_id": "", "room_name": "design-room-8e9f1f75-7548-4f0c-9179-557f914f63cb", "agent_name": "", "resuming": false, "timestamp": "2025-06-16T18:53:53.231416+00:00"}
Received job request <livekit.agents.job.JobRequest object at 0x115c37d70>
{"message": "initializing process", "level": "INFO", "name": "livekit.agents", "pid": 39144, "timestamp": "2025-06-16T18:53:53.299970+00:00"}
{"message": "unhandled exception while running the job task\nTraceback (most recent call last):\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/design_assistant/design_assistant.py\", line 982, in entrypoint\n    userdata.personas[\"design_coach\"] = DesignCoachAgent()\n                                        ^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/design_assistant/design_assistant.py\", line 456, in __init__\n    super().__init__(\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/design_assistant/design_assistant.py\", line 284, in __init__\n    self._original_instructions = self.llm.instructions\n                                  ^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'LLM' object has no attribute 'instructions'", "level": "ERROR", "name": "livekit.agents", "pid": 39106, "job_id": "AJ_XDaHCcgHatCq", "timestamp": "2025-06-16T18:53:53.627159+00:00"}
{"message": "process initialized", "level": "INFO", "name": "livekit.agents", "pid": 39144, "elapsed_time": 1.35, "timestamp": "2025-06-16T18:53:54.656792+00:00"}
{"message": "worker is at full capacity, marking as unavailable", "level": "INFO", "name": "livekit.agents", "load": 0.8313999999999998, "threshold": "_WorkerEnvOption(dev_default=inf, prod_default=0.75)", "timestamp": "2025-06-16T18:59:12.179919+00:00"}
{"message": "worker is below capacity, marking as available", "level": "INFO", "name": "livekit.agents", "load": 0.6391999999999998, "threshold": "_WorkerEnvOption(dev_default=inf, prod_default=0.75)", "timestamp": "2025-06-16T18:59:22.816620+00:00"}
{"message": "failed to connect to livekit, retrying in 0s", "level": "WARNING", "name": "livekit.agents", "exc_info": "Traceback (most recent call last):\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/livekit/agents/worker.py\", line 693, in _connection_task\n    await self._run_ws(ws)\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/livekit/agents/worker.py\", line 774, in _run_ws\n    await asyncio.gather(*tasks)\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/livekit/agents/worker.py\", line 746, in _recv_task\n    raise Exception(\"worker connection closed unexpectedly\")\nException: worker connection closed unexpectedly", "timestamp": "2025-06-16T19:28:19.017509+00:00"}
{"message": "failed to connect to livekit, retrying in 2s", "level": "WARNING", "name": "livekit.agents", "exc_info": "Traceback (most recent call last):\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/connector.py\", line 1512, in _create_direct_connection\n    hosts = await self._resolve_host(host, port, traces=traces)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/connector.py\", line 1128, in _resolve_host\n    return await asyncio.shield(resolved_host_task)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/connector.py\", line 1159, in _resolve_host_with_throttle\n    addrs = await self._resolver.resolve(host, port, family=self._family)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/resolver.py\", line 40, in resolve\n    infos = await self._loop.getaddrinfo(\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.2_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/base_events.py\", line 899, in getaddrinfo\n    return await self.run_in_executor(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.2_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/homebrew/Cellar/python@3.12/3.12.2_1/Frameworks/Python.framework/Versions/3.12/lib/python3.12/socket.py\", line 963, in getaddrinfo\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nsocket.gaierror: [Errno 8] nodename nor servname provided, or not known\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/livekit/agents/worker.py\", line 654, in _connection_task\n    ws = await self._http_session.ws_connect(\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/client.py\", line 1059, in _ws_connect\n    resp = await self.request(\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/client.py\", line 768, in _request\n    resp = await handler(req)\n           ^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/client.py\", line 723, in _connect_and_send_request\n    conn = await self._connector.connect(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/connector.py\", line 622, in connect\n    proto = await self._create_connection(req, traces, timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/connector.py\", line 1189, in _create_connection\n    _, proto = await self._create_direct_connection(req, traces, timeout)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/zachstarin/Desktop/Livekit_Design_Agent/venv/lib/python3.12/site-packages/aiohttp/connector.py\", line 1518, in _create_direct_connection\n    raise ClientConnectorDNSError(req.connection_key, exc) from exc\naiohttp.client_exceptions.ClientConnectorDNSError: Cannot connect to host ai-voice-app-76877ljj.livekit.cloud:443 ssl:default [nodename nor servname provided, or not known]", "timestamp": "2025-06-16T19:32:59.958824+00:00"}
{"message": "registered worker", "level": "INFO", "name": "livekit.agents", "id": "AW_v8fjGFwFgFxA", "url": "wss://ai-voice-app-76877ljj.livekit.cloud", "region": "US West", "protocol": 16, "timestamp": "2025-06-16T19:33:19.315159+00:00"}
